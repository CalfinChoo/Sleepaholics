<!DOCTYPE html>
<html>
<head>
    <title>Document</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <script type="text/javascript">
        
        $(document).ready(function() {
            var socket = io.connect('http://127.0.0.1:5000/');

            socket.on('connect', function() {
                socket.emit('join_room', {
                    room: "{{ room }}"
                });
            });

            socket.on('room_announcement', function(data) {
                $("#messages").append("<li>User joined room!</li>")
            })

            socket.on('receive_message', function(data) {
                console.log(data.message)
                $("#messages").append("<li>"+data.message+"</li>")
            })

            $("#sendbutton").on('click', function() {
                socket.emit('send_message', {
                    room: "{{ room }}",
                    message: $("#myMessage").val()
                })
                $("#myMessage").val("")
            })

        });
    </script>

    <h3>Welcome to Chat {{ room }}</h3>
    <ul id="messages"></ul>
    <input type="text" id="myMessage">
    <button id="sendbutton">Send</button>

</body>
</html>